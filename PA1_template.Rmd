---
title: "Reproducible Research: Peer Assessment 1"
output: 
  html_document:
    keep_md: true
---

## Loading and preprocessing the data
### Setup the data files
First, establish some settings regarding where the data is located:
```{r}
url = "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2Factivity.zip"
zipFile = "activity.zip"
dataDirectory = "data"
dataFile = "activity.csv"
```

Then, perform data caching. Check if the required data is already stored in the 
working directory. If the data has already been extracted into the "data" 
directory as a csv file, then nothing needs to be done at this stage. If the 
data esists only as a zip file in the working directory, then extract the data 
into a csv file. And if the data is not present at all, download and extract 
the data automatically from the source URL. 
```{r}
# Checks if the csv data exists
dataFilePath = paste(dataDirectory, dataFile, sep="/")
if(!file.exists(dataFilePath)){
    # Create the data directory if not already present
    if(!file.exists(dataDirectory)){
        dir.create(dataDirectory)
    }
    # Download the zip file from URL if its not already in working directory
    if (!file.exists(zipFile)) {
        download.file(url, destfile = zipFile, mode="wb")
    }
    # unzip the contents of the zip file into data directory
    unzip(zipFile, exdir=dataDirectory)
}
```

### Loading the data
Since it has now been established that the data exists in the data directory, we 
can load it into a data frame. 
```{r}
df = read.csv(dataFilePath)
```

The data contains a date field, so we need to convert the items in that column 
to be date objects instead of strings. 

### Preprocess the data
```{r}
dateFormat = "%Y-%m-%d"
df$date = as.Date(df$date, dateFormat)
```


## What is mean total number of steps taken per day?
A histogram with 20 breaks reveals that this is a bimodal distribution. The data 
contains a disproportionate number of 
```{r}
library(dplyr)

#df_by_day = group_by(df, date)
df.StepsPerDay = summarise(group_by(df, date), total.steps=sum(steps, na.rm=TRUE))
with(df.StepsPerDay, mean(total.steps, na.rm=TRUE))   #9354.23

hist(df.StepsPerDay$total.steps, breaks=20, col="red", 
     xlab="Total Number of Steps Per Day",
     main="Frequencies of Total Number of Steps Per Day")

head(df, 20)
df()
df$date
```



## What is the average daily activity pattern?



## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?
